<!DOCTYPE html>
<html>
<head>
    <title>Combine Containers</title>
</head>
<body>
    <h1>Combine Containers</h1>

    <!-- Setup Button Form -->
    <form method="post" action="/init">
        <button type="submit">Setup</button>
    </form>

    <!-- Show setup result if available -->
    {% if setup_result %}
        <p>{{ setup_result }}</p>
    {% endif %}

    <form method="post">
        <h2>Select a Network Container</h2>
        <select name="network_container" required>
            <option value="">--Select a Network Container--</option>
            {% for container in network_containers %}
                <option value="{{ container.name }}">{{ container.name }} (IP: {{ container.ipv4_address }})</option>
            {% endfor %}
        </select>

        <h2>Select a Docker-in-Docker (DIND) Container</h2>
        <select name="dind_container" required>
            <option value="">--Select a DIND Container--</option>
            {% for container in dind_containers %}
                <option value="{{ container.name }}">{{ container.name }}</option>
            {% endfor %}
        </select>

        <br><br>
        <button type="submit">Combine Containers</button>
    </form>

    {% if combined_containers %}
        <h2>Saved Combined Containers:</h2>
        <ul>
            {% for combo in combined_containers %}
                <li>
                    <strong>{{ combo.network_container }}</strong> + <strong>{{ combo.dind_container }}</strong>

                    <!-- Remove Button -->
                    <form method="post" action="/remove" style="display:inline;">
                        <input type="hidden" name="to_remove" value="{{ combo.network_container }}|{{ combo.dind_container }}">
                        <button type="submit">Remove</button>
                    </form>

                    <!-- View Logs Button -->
                    <form method="get" action="{{ url_for('view_logs', container_name=combo.dind_container) }}" style="display:inline;">
                        <button type="submit">View Logs</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

<h2>Deploy Ontop Container</h2>
<form method="post" action="/deploy_ontop" enctype="multipart/form-data">
    <label for="obda_file">OBDA File:</label>
    <input type="file" name="obda_file" required><br><br>

    <label for="owl_file">OWL File:</label>
    <input type="file" name="owl_file" required><br><br>

    <label for="properties_file">Properties File:</label>
    <input type="file" name="properties_file" required><br><br>

    <button type="submit">Deploy Ontop</button>
</form>
</body>
</html>
